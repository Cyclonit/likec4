version: '3'

tasks:
  release:
    dotenv: ['.env']
    cmds:
      - yarn workspaces foreach -t --exclude=root version minor
      - yarn version check --interactive
      - yarn version apply --all -R
      - yarn release-build
      - yarn workspaces foreach -t --exclude=root --exclude="@likec4/example-bigbank" --exclude="@likec4/docs-website" --exclude="@likec4/vscode-preview" npm publish
      - yarn clean:after:publish
